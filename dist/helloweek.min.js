!function(t){var e={};function s(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/dist",s(s.s=0)}({0:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s(5);var a=function(){function t(e){void 0===e&&(e={});var s=this;if(this.selectedDays=[],this.options=t.extend(e),this.selector="string"==typeof this.options.selector?document.querySelector(this.options.selector):this.options.selector,null===this.selector)throw new Error("You need to specify a selector!");this.activeDates=null,this.date=this.options.defaultDate?new Date(this.options.defaultDate):new Date,this.defaultDate=this.options.defaultDate?new Date(this.options.defaultDate):new Date,this.currentDay=new Date,this.month=this.selector.querySelector("."+t.CSS_CLASSES.MONTH),this.week=this.selector.querySelector("."+t.CSS_CLASSES.WEEK),this.label=this.selector.querySelector("."+t.CSS_CLASSES.LABEL),this.readFile(this.options.langFolder+this.options.lang+".json",function(t){s.langs=JSON.parse(t),s.init(function(){})})}return t.prototype.init=function(t){this.options.format&&this.defaultDate&&this.selectedDays.push(this.formatDate(this.defaultDate,this.options.format)),this.date.setDate(1),this.updted(),this.options.onLoad.call(this),t&&t.call(this)},t.prototype.prev=function(t){this.clearCalendar();var e=this.date.getMonth()-1;this.date.setMonth(e),this.updted(),this.options.onChange.call(this),t&&t.call(this)},t.prototype.next=function(t){this.clearCalendar();var e=this.date.getMonth()+1;this.date.setMonth(e),this.updted(),this.options.onChange.call(this),t&&t.call(this)},t.prototype.getToday=function(){return this.options.format?this.formatDate(this.currentDay,this.options.format):this.currentDay},t.prototype.today=function(){this.clearCalendar(),this.date=new Date,this.date.setDate(1),this.updted()},t.prototype.clear=function(t){this.clearCalendar(),this.date.setDate(1),this.selectedDays=[],this.updted(),this.options.onClear.call(this),t&&t.call(this)},t.prototype.selectDay=function(e){var s=this;this.activeDates=this.selector.querySelectorAll("."+t.CSS_CLASSES.IS_ACTIVE);for(var a=0,i=Object.keys(this.activeDates);a<i.length;a++){var o=i[a];this.activeDates[o].addEventListener("click",function(a){var i=a.target;s.options.format?s.lastSelectedDay=s.formatDate(1e3*parseInt(i.dataset.timestamp),s.options.format):s.lastSelectedDay=i.dataset.timestamp,s.options.multiplePick?(s.selectedDays.push(s.lastSelectedDay),a.target.classList.contains(t.CSS_CLASSES.IS_SELECTED)&&(s.selectedDays=s.selectedDays.filter(function(t){return t!==s.lastSelectedDay}))):(a.target.classList.contains(t.CSS_CLASSES.IS_DISABLED)||s.removeActiveClass(),s.selectedDays=[],s.selectedDays.push(s.lastSelectedDay)),a.target.classList.contains(t.CSS_CLASSES.IS_DISABLED)||a.target.classList.toggle(t.CSS_CLASSES.IS_SELECTED),s.options.onSelect.call(s),e&&e.call(s)})}},t.prototype.creatWeek=function(e){var s=document.createElement("span");s.classList.add(t.CSS_CLASSES.WEEK_DAY),s.textContent=e,this.week.appendChild(s)},t.prototype.createMonth=function(){for(var t=this.date.getMonth();this.date.getMonth()===t;)this.createDay(this.date.getDate(),this.date.getDay()),this.date.setDate(this.date.getDate()+1);this.date.setMonth(this.date.getMonth()-1),this.selectDay(function(){})},t.prototype.createDay=function(e,s){var a=this,i=Date.parse(this.date),o=i/1e3,n=document.createElement("div");n.textContent=e,n.classList.add(t.CSS_CLASSES.DAY),n.setAttribute("data-timestamp",o),1===e&&(this.options.weekStart===t.DAYS_WEEK.SUNDAY?n.style.marginLeft=s*(100/7)+"%":s===t.DAYS_WEEK.SUNDAY?n.style.marginLeft=(7-this.options.weekStart)*(100/7)+"%":n.style.marginLeft=100/7*(s-1)+"%"),s!==t.DAYS_WEEK.SUNDAY&&s!==t.DAYS_WEEK.SATURDAY||n.classList.add(t.CSS_CLASSES.IS_WEEKEND),this.options.disabledDaysOfWeek&&this.options.disabledDaysOfWeek.includes(s)&&n.classList.add(t.CSS_CLASSES.IS_DISABLED),this.options.disablePastDays&&this.date.getTime()<=this.defaultDate.getTime()-1||this.options.minDate&&o<=this.options.minDate||this.options.maxDate&&o>=this.options.maxDate?n.classList.add(t.CSS_CLASSES.IS_DISABLED):n.classList.add(t.CSS_CLASSES.IS_ACTIVE),this.options.disableDates&&(this.options.disableDates[0]instanceof Array?this.options.disableDates.map(function(e){a.options.format?i>=new Date(e[0]).getTime()&&i<=new Date(e[1]+" 23:59:59").getTime()&&n.classList.add(t.CSS_CLASSES.IS_DISABLED):i>=e[0]&&i<=e[1]&&n.classList.add(t.CSS_CLASSES.IS_DISABLED)}):this.options.format?this.options.disableDates.includes(this.formatDate(i,this.options.format))&&n.classList.add(t.CSS_CLASSES.IS_DISABLED):(this.options.disableDates.map(function(e){a.formatDate(new Date(i).getTime(),"YYYY-MM-DD")===a.formatDate(new Date(+e).getTime(),"YYYY-MM-DD")&&n.classList.add(t.CSS_CLASSES.IS_DISABLED)}),this.options.disableDates.includes(i.toString())&&n.classList.add(t.CSS_CLASSES.IS_DISABLED))),new Date(this.date).setHours(0,0,0,0)===new Date(this.currentDay).setHours(0,0,0,0)&&this.options.todayHighlight&&n.classList.add(t.CSS_CLASSES.IS_TODAY),this.options.format?this.selectedDays.find(function(e){e===a.formatDate(i,a.options.format)&&n.classList.toggle(t.CSS_CLASSES.IS_SELECTED)}):this.selectedDays.find(function(e){e===o.toString()&&n.classList.toggle(t.CSS_CLASSES.IS_SELECTED)}),this.month&&this.month.appendChild(n)},t.prototype.monthsAsString=function(t){return this.options.monthShort?this.langs.monthsShort[t]:this.langs.months[t]},t.prototype.weekAsString=function(t){return this.options.weekShort?this.langs.daysShort[t]:this.langs.days[t]},t.prototype.updted=function(){var t=[];this.label.textContent=this.monthsAsString(this.date.getMonth())+" "+this.date.getFullYear(),this.week.textContent="";for(var e=this.options.weekStart;e<this.langs.daysShort.length;e++)t.push(e);for(e=0;e<this.options.weekStart;e++)t.push(e);for(var s=0,a=t;s<a.length;s++){var i=a[s];this.creatWeek(this.weekAsString(i))}this.createMonth()},t.prototype.clearCalendar=function(){this.month.textContent=""},t.prototype.removeActiveClass=function(){for(var e=0,s=Object.keys(this.activeDates);e<s.length;e++){var a=s[e];this.activeDates[a].classList.remove(t.CSS_CLASSES.IS_SELECTED)}},t.prototype.destroy=function(){this.removeActiveClass()},t.prototype.readFile=function(t,e){var s=new XMLHttpRequest;s.overrideMimeType("application/json"),s.open("GET",t,!0),s.onreadystatechange=function(){4===s.readyState&&200===s.status&&e(s.responseText)},s.send(null)},t.prototype.formatDate=function(t,e){var s=new Date(t);return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("dd",s.getDate().toString())).replace("DD",(s.getDate()>9?s.getDate():"0"+s.getDate()).toString())).replace("mm",(s.getMonth()+1).toString())).replace("MMM",this.langs.months[s.getMonth()])).replace("MM",(s.getMonth()+1>9?s.getMonth()+1:"0"+(s.getMonth()+1)).toString())).replace("mmm",this.langs.monthsShort[s.getMonth()])).replace("yyyy",s.getFullYear().toString())).replace("YYYY",s.getFullYear().toString())).replace("YY",s.getFullYear().toString().substring(2))).replace("yy",s.getFullYear().toString().substring(2))},t.extend=function(t){for(var e={selector:".hello-week",lang:"en",langFolder:"./dist/langs/",format:!1,weekShort:!0,monthShort:!1,multiplePick:!1,defaultDate:!1,todayHighlight:!0,disablePastDays:!1,disabledDaysOfWeek:!1,disableDates:!1,weekStart:0,minDate:!1,maxDate:!1,onLoad:function(){},onChange:function(){},onSelect:function(){},onClear:function(){}},s=t,a=0,i=Object.keys(s);a<i.length;a++){var o=i[a];e[o]=s[o]}return e},t.CSS_CLASSES={MONTH:"hello-week__month",DAY:"hello-week__day",WEEK:"hello-week__week",WEEK_DAY:"hello-week__week__day",LABEL:"hello-week__label",IS_ACTIVE:"is-active",IS_SELECTED:"is-selected",IS_DISABLED:"is-disabled",IS_TODAY:"is-today",IS_WEEKEND:"is-weekend"},t.DAYS_WEEK={SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6},t}();e.HelloWeek=a;var i,o=s(0);!function(t){t.HelloWeek=o.HelloWeek}(i=e.MyModule||(e.MyModule={})),window.HelloWeek=i.HelloWeek},5:function(t,e){}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvaGVsbG8td2Vlay50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJ2YWx1ZSIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiSGVsbG9XZWVrIiwib3B0aW9ucyIsIl90aGlzIiwidGhpcyIsInNlbGVjdGVkRGF5cyIsImV4dGVuZCIsInNlbGVjdG9yIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiRXJyb3IiLCJhY3RpdmVEYXRlcyIsImRhdGUiLCJkZWZhdWx0RGF0ZSIsIkRhdGUiLCJjdXJyZW50RGF5IiwibW9udGgiLCJDU1NfQ0xBU1NFUyIsIk1PTlRIIiwid2VlayIsIldFRUsiLCJsYWJlbCIsIkxBQkVMIiwicmVhZEZpbGUiLCJsYW5nRm9sZGVyIiwibGFuZyIsInRleHQiLCJsYW5ncyIsIkpTT04iLCJwYXJzZSIsImluaXQiLCJjYWxsYmFjayIsImZvcm1hdCIsInB1c2giLCJmb3JtYXREYXRlIiwic2V0RGF0ZSIsInVwZHRlZCIsIm9uTG9hZCIsInByZXYiLCJjbGVhckNhbGVuZGFyIiwicHJldk1vbnRoIiwiZ2V0TW9udGgiLCJzZXRNb250aCIsIm9uQ2hhbmdlIiwibmV4dCIsIm5leHRNb250aCIsImdldFRvZGF5IiwidG9kYXkiLCJjbGVhciIsIm9uQ2xlYXIiLCJzZWxlY3REYXkiLCJxdWVyeVNlbGVjdG9yQWxsIiwiSVNfQUNUSVZFIiwiX2kiLCJfYSIsImtleXMiLCJsZW5ndGgiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJsYXN0U2VsZWN0ZWREYXkiLCJwYXJzZUludCIsImRhdGFzZXQiLCJ0aW1lc3RhbXAiLCJtdWx0aXBsZVBpY2siLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIklTX1NFTEVDVEVEIiwiZmlsdGVyIiwiZGF5IiwiSVNfRElTQUJMRUQiLCJyZW1vdmVBY3RpdmVDbGFzcyIsInRvZ2dsZSIsIm9uU2VsZWN0IiwiY3JlYXRXZWVrIiwiZGF5U2hvcnQiLCJ3ZWVrRGF5IiwiY3JlYXRlRWxlbWVudCIsImFkZCIsIldFRUtfREFZIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImNyZWF0ZU1vbnRoIiwiY3VycmVudE1vbnRoIiwiY3JlYXRlRGF5IiwiZ2V0RGF0ZSIsImdldERheSIsIm51bSIsInVuaXhUaW1lc3RhbXAiLCJuZXdEYXkiLCJEQVkiLCJzZXRBdHRyaWJ1dGUiLCJ3ZWVrU3RhcnQiLCJEQVlTX1dFRUsiLCJTVU5EQVkiLCJzdHlsZSIsIm1hcmdpbkxlZnQiLCJTQVRVUkRBWSIsIklTX1dFRUtFTkQiLCJkaXNhYmxlZERheXNPZldlZWsiLCJpbmNsdWRlcyIsImRpc2FibGVQYXN0RGF5cyIsImdldFRpbWUiLCJtaW5EYXRlIiwibWF4RGF0ZSIsImRpc2FibGVEYXRlcyIsIkFycmF5IiwibWFwIiwidG9TdHJpbmciLCJzZXRIb3VycyIsInRvZGF5SGlnaGxpZ2h0IiwiSVNfVE9EQVkiLCJmaW5kIiwibW9udGhzQXNTdHJpbmciLCJtb250aEluZGV4IiwibW9udGhTaG9ydCIsIm1vbnRoc1Nob3J0IiwibW9udGhzIiwid2Vla0FzU3RyaW5nIiwid2Vla0luZGV4Iiwid2Vla1Nob3J0IiwiZGF5c1Nob3J0IiwiZGF5cyIsImxpc3REYXlzIiwiZ2V0RnVsbFllYXIiLCJsaXN0RGF5c18xIiwicmVtb3ZlIiwiZGVzdHJveSIsImZpbGUiLCJ4b2JqIiwiWE1MSHR0cFJlcXVlc3QiLCJvdmVycmlkZU1pbWVUeXBlIiwib3BlbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJzdGF0dXMiLCJyZXNwb25zZVRleHQiLCJzZW5kIiwiZHQiLCJyZXBsYWNlIiwic3Vic3RyaW5nIiwic2V0dGluZ3MiLCJkZWZhdWx0U2V0dGluZ3MiLCJNT05EQVkiLCJUVUVTREFZIiwiV0VETkVTREFZIiwiVEhVUlNEQVkiLCJGUklEQVkiLCJNeU1vZHVsZSIsImhlbGxvX3dlZWtfMSIsIndpbmRvdyJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsS0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxJQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFlBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEdBQ0FLLGNBQUEsRUFDQUMsWUFBQSxFQUNBQyxJQUFBTixLQU1BWixFQUFBbUIsRUFBQSxTQUFBakIsR0FDQVksT0FBQUMsZUFBQWIsRUFBQSxjQUFpRGtCLE9BQUEsS0FJakRwQixFQUFBcUIsRUFBQSxTQUFBbEIsR0FDQSxJQUFBUyxFQUFBVCxLQUFBbUIsV0FDQSxXQUEyQixPQUFBbkIsRUFBQSxTQUMzQixXQUFpQyxPQUFBQSxHQUVqQyxPQURBSCxFQUFBVSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFaLEVBQUFhLEVBQUEsU0FBQVUsRUFBQUMsR0FBc0QsT0FBQVYsT0FBQVcsVUFBQUMsZUFBQW5CLEtBQUFnQixFQUFBQyxJQUd0RHhCLEVBQUEyQixFQUFBLFFBSUEzQixJQUFB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QUF2QyxJQUFNN0UsRUFBQzhFLEVBQUFELEdBQ1J3RixFQUFTckssR0FBS3NLLEVBQWdCdEssR0FHbEMsT0FBT3FLLEdBdllZNUksRUFBQWdCLGFBQ25CQyxNQUFjLG9CQUNkd0UsSUFBYyxrQkFDZHRFLEtBQWMsbUJBQ2QyRCxTQUFjLHdCQUNkekQsTUFBYyxvQkFDZDhCLFVBQWMsWUFDZGUsWUFBYyxjQUNkRyxZQUFjLGNBQ2R5QyxTQUFjLFdBQ2RiLFdBQWMsY0FHS2pHLEVBQUE0RixXQUNuQkMsT0FBWSxFQUNaaUQsT0FBWSxFQUNaQyxRQUFZLEVBQ1pDLFVBQVksRUFDWkMsU0FBWSxFQUNaQyxPQUFZLEVBQ1psRCxTQUFZLEdBcVhwQmhHLEVBdlpBLEdBQWEzQixFQUFBMkIsWUF5WmIsSUFDaUJtSixFQURqQkMsRUFBQWpMLEVBQUEsSUFDQSxTQUFpQmdMLEdBQ0FBLEVBQUFuSixVQUFZb0osRUFBQXBKLFVBRDdCLENBQWlCbUosRUFBQTlLLEVBQUE4SyxXQUFBOUssRUFBQThLLGNBSVhFLE9BQVFySixVQUFZbUosRUFBU25KIiwiZmlsZSI6ImhlbGxvd2Vlay5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvZGlzdFwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJpbXBvcnQgJy4uL3N0eWxlcy9oZWxsby13ZWVrLnNjc3MnO1xuXG50eXBlIENhbGxiYWNrRnVuY3Rpb24gPSAoLi4uYXJnczogYW55W10pID0+IHZvaWQ7XG5cbmV4cG9ydCBjbGFzcyBIZWxsb1dlZWsge1xuICAgIHByaXZhdGUgb3B0aW9uczogYW55O1xuICAgIHByaXZhdGUgc2VsZWN0b3I6IGFueTtcbiAgICBwcml2YXRlIG1vbnRoOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIHdlZWs6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgbGFiZWw6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgYWN0aXZlRGF0ZXM6IGFueTtcbiAgICBwcml2YXRlIGRhdGU6IGFueTtcbiAgICBwcml2YXRlIGxhbmdzOiBhbnk7XG4gICAgcHJpdmF0ZSBkZWZhdWx0RGF0ZTogYW55O1xuICAgIHB1YmxpYyBjdXJyZW50RGF5OiBhbnk7XG4gICAgcHVibGljIGxhc3RTZWxlY3RlZERheTogc3RyaW5nO1xuICAgIHB1YmxpYyBzZWxlY3RlZERheXM6IGFueSA9IFtdO1xuXG4gICAgcHVibGljIHN0YXRpYyByZWFkb25seSBDU1NfQ0xBU1NFUzogYW55ID0ge1xuICAgICAgICBNT05USCAgICAgICA6ICdoZWxsby13ZWVrX19tb250aCcsXG4gICAgICAgIERBWSAgICAgICAgIDogJ2hlbGxvLXdlZWtfX2RheScsXG4gICAgICAgIFdFRUsgICAgICAgIDogJ2hlbGxvLXdlZWtfX3dlZWsnLFxuICAgICAgICBXRUVLX0RBWSAgICA6ICdoZWxsby13ZWVrX193ZWVrX19kYXknLFxuICAgICAgICBMQUJFTCAgICAgICA6ICdoZWxsby13ZWVrX19sYWJlbCcsXG4gICAgICAgIElTX0FDVElWRSAgIDogJ2lzLWFjdGl2ZScsXG4gICAgICAgIElTX1NFTEVDVEVEIDogJ2lzLXNlbGVjdGVkJyxcbiAgICAgICAgSVNfRElTQUJMRUQgOiAnaXMtZGlzYWJsZWQnLFxuICAgICAgICBJU19UT0RBWSAgICA6ICdpcy10b2RheScsXG4gICAgICAgIElTX1dFRUtFTkQgIDogJ2lzLXdlZWtlbmQnLFxuICAgIH07XG5cbiAgICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IERBWVNfV0VFSzogYW55ID0ge1xuICAgICAgICBTVU5EQVkgICAgOiAwLFxuICAgICAgICBNT05EQVkgICAgOiAxLFxuICAgICAgICBUVUVTREFZICAgOiAyLFxuICAgICAgICBXRURORVNEQVkgOiAzLFxuICAgICAgICBUSFVSU0RBWSAgOiA0LFxuICAgICAgICBGUklEQVkgICAgOiA1LFxuICAgICAgICBTQVRVUkRBWSAgOiA2LFxuICAgIH07XG5cbiAgICBjb25zdHJ1Y3RvciAob3B0aW9uczogYW55ID0ge30pIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gSGVsbG9XZWVrLmV4dGVuZChvcHRpb25zKTtcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9IHR5cGVvZiB0aGlzLm9wdGlvbnMuc2VsZWN0b3IgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuc2VsZWN0b3IpIDogdGhpcy5vcHRpb25zLnNlbGVjdG9yO1xuXG4gICAgICAgIC8vIEVhcmx5IHRocm93IGlmIHNlbGVjdG9yIGRvZXNuJ3QgZXhpc3RzXG4gICAgICAgIGlmICh0aGlzLnNlbGVjdG9yID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1lvdSBuZWVkIHRvIHNwZWNpZnkgYSBzZWxlY3RvciEnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWN0aXZlRGF0ZXMgPSBudWxsO1xuICAgICAgICB0aGlzLmRhdGUgPSB0aGlzLm9wdGlvbnMuZGVmYXVsdERhdGUgPyBuZXcgRGF0ZSh0aGlzLm9wdGlvbnMuZGVmYXVsdERhdGUpIDogbmV3IERhdGUoKTtcbiAgICAgICAgdGhpcy5kZWZhdWx0RGF0ZSA9IHRoaXMub3B0aW9ucy5kZWZhdWx0RGF0ZSA/IG5ldyBEYXRlKHRoaXMub3B0aW9ucy5kZWZhdWx0RGF0ZSkgOiBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLmN1cnJlbnREYXkgPSBuZXcgRGF0ZSgpO1xuXG4gICAgICAgIHRoaXMubW9udGggPSB0aGlzLnNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy4nICsgSGVsbG9XZWVrLkNTU19DTEFTU0VTLk1PTlRIKTtcbiAgICAgICAgdGhpcy53ZWVrID0gdGhpcy5zZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcuJyArIEhlbGxvV2Vlay5DU1NfQ0xBU1NFUy5XRUVLKTtcbiAgICAgICAgdGhpcy5sYWJlbCA9IHRoaXMuc2VsZWN0b3IucXVlcnlTZWxlY3RvcignLicgKyBIZWxsb1dlZWsuQ1NTX0NMQVNTRVMuTEFCRUwpO1xuXG4gICAgICAgIHRoaXMucmVhZEZpbGUodGhpcy5vcHRpb25zLmxhbmdGb2xkZXIgKyB0aGlzLm9wdGlvbnMubGFuZyArICcuanNvbicsICh0ZXh0OiBhbnkpID0+IHtcbiAgICAgICAgICAgIHRoaXMubGFuZ3MgPSBKU09OLnBhcnNlKHRleHQpO1xuICAgICAgICAgICAgdGhpcy5pbml0KCgpID0+IHsgLyoqIGNhbGxiYWNrIGZ1bmN0aW9uICovIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsXG4gICAgICogQHBhcmFtIHtDYWxsYmFja0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAqL1xuICAgIHB1YmxpYyBpbml0KGNhbGxiYWNrOiBDYWxsYmFja0Z1bmN0aW9uKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZm9ybWF0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5kZWZhdWx0RGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXlzLnB1c2godGhpcy5mb3JtYXREYXRlKHRoaXMuZGVmYXVsdERhdGUsIHRoaXMub3B0aW9ucy5mb3JtYXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGF0ZS5zZXREYXRlKDEpO1xuICAgICAgICB0aGlzLnVwZHRlZCgpO1xuICAgICAgICB0aGlzLm9wdGlvbnMub25Mb2FkLmNhbGwodGhpcyk7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFB1YmxpYyBtZXRob2RcbiAgICAgKiBNZXRob2QgdG8gY2hhbmdlIHRoZSBtb250aCB0byB0aGUgcHJldmlvdXMsIGFsc28geW91IGNhbiBzZW5kIGEgY2FsbGJhY2sgZnVuY3Rpb24gbGlrZSBhIHBhcmFtZXRlci5cbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrRnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICovXG4gICAgcHVibGljIHByZXYoY2FsbGJhY2s6IENhbGxiYWNrRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jbGVhckNhbGVuZGFyKCk7XG4gICAgICAgIGNvbnN0IHByZXZNb250aCA9IHRoaXMuZGF0ZS5nZXRNb250aCgpIC0gMTtcbiAgICAgICAgdGhpcy5kYXRlLnNldE1vbnRoKHByZXZNb250aCk7XG4gICAgICAgIHRoaXMudXBkdGVkKCk7XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2hhbmdlLmNhbGwodGhpcyk7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFB1YmxpYyBtZXRob2RcbiAgICAgKiBNZXRob2QgdG8gY2hhbmdlIHRoZSBtb250aCB0byB0aGUgbmV4dCwgYWxzbyB5b3UgY2FuIHNlbmQgYSBjYWxsYmFjayBmdW5jdGlvbiBsaWtlIGEgcGFyYW1ldGVyLlxuICAgICAqIEBwYXJhbSB7Q2FsbGJhY2tGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICAgKi9cbiAgICBwdWJsaWMgbmV4dChjYWxsYmFjazogQ2FsbGJhY2tGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICB0aGlzLmNsZWFyQ2FsZW5kYXIoKTtcbiAgICAgICAgY29uc3QgbmV4dE1vbnRoID0gdGhpcy5kYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICB0aGlzLmRhdGUuc2V0TW9udGgobmV4dE1vbnRoKTtcbiAgICAgICAgdGhpcy51cGR0ZWQoKTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMub25DaGFuZ2UuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHVibGljIG1ldGhvZFxuICAgICAqIFRoaXMgZnVuY3Rpb24gcmV0dXJucyB0aGUgY3VycmVudCBkYXkgd2l0aCB0aGUgZm9ybWF0IGlmIHNwZWNpZmllZCwgdGltZXN0YW1wIGluIGFub3RoZXIgY2FzZS5cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0VG9kYXkoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5mb3JtYXQgPyB0aGlzLmZvcm1hdERhdGUodGhpcy5jdXJyZW50RGF5LCB0aGlzLm9wdGlvbnMuZm9ybWF0KSA6IHRoaXMuY3VycmVudERheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQdWJsaWMgbWV0aG9kXG4gICAgICogVGhpcyBmdW5jdGlvbiBtb3ZlIHRoZSBjYWxlbmRhciB0byBjdXJyZW50IGRheS5cbiAgICAgKi9cbiAgICBwdWJsaWMgdG9kYXkoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY2xlYXJDYWxlbmRhcigpO1xuICAgICAgICB0aGlzLmRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgICAgICB0aGlzLmRhdGUuc2V0RGF0ZSgxKTtcbiAgICAgICAgdGhpcy51cGR0ZWQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQdWJsaWMgbWV0aG9kXG4gICAgICogQ2xlYW4geW91cnMgc2VsZWN0ZWQgZGF5cyBpbiBjYWxlbmRhci5cbiAgICAgKi9cbiAgICBwdWJsaWMgY2xlYXIoY2FsbGJhY2s6IENhbGxiYWNrRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5jbGVhckNhbGVuZGFyKCk7XG4gICAgICAgIHRoaXMuZGF0ZS5zZXREYXRlKDEpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGF5cyA9IFtdO1xuICAgICAgICB0aGlzLnVwZHRlZCgpO1xuXG4gICAgICAgIHRoaXMub3B0aW9ucy5vbkNsZWFyLmNhbGwodGhpcyk7XG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlbGVjdCBkYXlcbiAgICAgKiBAcGFyYW0ge0NhbGxiYWNrRnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICovXG4gICAgcHVibGljIHNlbGVjdERheShjYWxsYmFjazogQ2FsbGJhY2tGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICB0aGlzLmFjdGl2ZURhdGVzID0gdGhpcy5zZWxlY3Rvci5xdWVyeVNlbGVjdG9yQWxsKCcuJyArIEhlbGxvV2Vlay5DU1NfQ0xBU1NFUy5JU19BQ1RJVkUpO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgT2JqZWN0LmtleXModGhpcy5hY3RpdmVEYXRlcykpIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlRGF0ZXNbaV0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdERheSA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGUgZm9ybWF0ZWRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0U2VsZWN0ZWREYXkgPSB0aGlzLmZvcm1hdERhdGUocGFyc2VJbnQoc2VsZWN0RGF5LmRhdGFzZXQudGltZXN0YW1wKSAqIDEwMDAsIHRoaXMub3B0aW9ucy5mb3JtYXQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGRhdGUgaW4gdGltZXN0YW1wXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdFNlbGVjdGVkRGF5ID0gc2VsZWN0RGF5LmRhdGFzZXQudGltZXN0YW1wO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubXVsdGlwbGVQaWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXlzLnB1c2godGhpcy5sYXN0U2VsZWN0ZWREYXkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhIZWxsb1dlZWsuQ1NTX0NMQVNTRVMuSVNfU0VMRUNURUQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF5cyA9IHRoaXMuc2VsZWN0ZWREYXlzLmZpbHRlcigoZGF5OiBzdHJpbmcpID0+IGRheSAhPT0gdGhpcy5sYXN0U2VsZWN0ZWREYXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKEhlbGxvV2Vlay5DU1NfQ0xBU1NFUy5JU19ESVNBQkxFRCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQWN0aXZlQ2xhc3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF5cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF5cy5wdXNoKHRoaXMubGFzdFNlbGVjdGVkRGF5KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoSGVsbG9XZWVrLkNTU19DTEFTU0VTLklTX0RJU0FCTEVEKSkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShIZWxsb1dlZWsuQ1NTX0NMQVNTRVMuSVNfU0VMRUNURUQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vblNlbGVjdC5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0V2VlayhkYXlTaG9ydDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHdlZWtEYXkgPSA8YW55PmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgd2Vla0RheS5jbGFzc0xpc3QuYWRkKEhlbGxvV2Vlay5DU1NfQ0xBU1NFUy5XRUVLX0RBWSk7XG4gICAgICAgIHdlZWtEYXkudGV4dENvbnRlbnQgPSBkYXlTaG9ydDtcbiAgICAgICAgdGhpcy53ZWVrLmFwcGVuZENoaWxkKHdlZWtEYXkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjcmVhdGVNb250aCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY3VycmVudE1vbnRoID0gdGhpcy5kYXRlLmdldE1vbnRoKCk7XG4gICAgICAgIHdoaWxlICh0aGlzLmRhdGUuZ2V0TW9udGgoKSA9PT0gY3VycmVudE1vbnRoKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZURheSh0aGlzLmRhdGUuZ2V0RGF0ZSgpLCB0aGlzLmRhdGUuZ2V0RGF5KCkpO1xuICAgICAgICAgICAgLy8ganVtcCB3aGlsZVxuICAgICAgICAgICAgdGhpcy5kYXRlLnNldERhdGUodGhpcy5kYXRlLmdldERhdGUoKSArIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcHV0IGNvcnJlY3QgbW9udGhcbiAgICAgICAgdGhpcy5kYXRlLnNldE1vbnRoKHRoaXMuZGF0ZS5nZXRNb250aCgpIC0gMSk7XG4gICAgICAgIHRoaXMuc2VsZWN0RGF5KCgpID0+IHsgLyoqIGNhbGxiYWNrIGZ1bmN0aW9uICovIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBkYXlzIGluc2lkZSBoZWxsby13ZWVrXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG51bVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkYXlcbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlRGF5IChudW06IG51bWJlciwgZGF5OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgdW5peFRpbWVzdGFtcCA9IERhdGUucGFyc2UodGhpcy5kYXRlKTtcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gdW5peFRpbWVzdGFtcCAvIDEwMDA7XG4gICAgICAgIGNvbnN0IG5ld0RheSA9IDxhbnk+ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAgICAgbmV3RGF5LnRleHRDb250ZW50ID0gbnVtO1xuICAgICAgICBuZXdEYXkuY2xhc3NMaXN0LmFkZChIZWxsb1dlZWsuQ1NTX0NMQVNTRVMuREFZKTtcbiAgICAgICAgbmV3RGF5LnNldEF0dHJpYnV0ZSgnZGF0YS10aW1lc3RhbXAnLCB0aW1lc3RhbXApO1xuXG4gICAgICAgIGlmIChudW0gPT09IDEpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMud2Vla1N0YXJ0ID09PSBIZWxsb1dlZWsuREFZU19XRUVLLlNVTkRBWSkge1xuICAgICAgICAgICAgICAgIG5ld0RheS5zdHlsZS5tYXJnaW5MZWZ0ID0gKChkYXkpICogKDEwMCAvIDcpKSArICclJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGRheSA9PT0gSGVsbG9XZWVrLkRBWVNfV0VFSy5TVU5EQVkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RGF5LnN0eWxlLm1hcmdpbkxlZnQgPSAoKDcgLSB0aGlzLm9wdGlvbnMud2Vla1N0YXJ0KSAqICgxMDAgLyA3KSkgKyAnJSc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RGF5LnN0eWxlLm1hcmdpbkxlZnQgPSAoKGRheSAtIDEpICogKDEwMCAvIDcpKSArICclJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF5ID09PSBIZWxsb1dlZWsuREFZU19XRUVLLlNVTkRBWSB8fCBkYXkgPT09IEhlbGxvV2Vlay5EQVlTX1dFRUsuU0FUVVJEQVkpIHtcbiAgICAgICAgICAgIG5ld0RheS5jbGFzc0xpc3QuYWRkKEhlbGxvV2Vlay5DU1NfQ0xBU1NFUy5JU19XRUVLRU5EKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZWREYXlzT2ZXZWVrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVkRGF5c09mV2Vlay5pbmNsdWRlcyhkYXkpKSB7XG4gICAgICAgICAgICAgICAgbmV3RGF5LmNsYXNzTGlzdC5hZGQoSGVsbG9XZWVrLkNTU19DTEFTU0VTLklTX0RJU0FCTEVEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgodGhpcy5vcHRpb25zLmRpc2FibGVQYXN0RGF5cyAmJiB0aGlzLmRhdGUuZ2V0VGltZSgpIDw9IHRoaXMuZGVmYXVsdERhdGUuZ2V0VGltZSgpIC0gMSkgfHwgKHRoaXMub3B0aW9ucy5taW5EYXRlICYmIHRpbWVzdGFtcCA8PSB0aGlzLm9wdGlvbnMubWluRGF0ZSkgfHwgKHRoaXMub3B0aW9ucy5tYXhEYXRlICYmIHRpbWVzdGFtcCA+PSB0aGlzLm9wdGlvbnMubWF4RGF0ZSkpIHtcbiAgICAgICAgICAgIG5ld0RheS5jbGFzc0xpc3QuYWRkKEhlbGxvV2Vlay5DU1NfQ0xBU1NFUy5JU19ESVNBQkxFRCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdEYXkuY2xhc3NMaXN0LmFkZChIZWxsb1dlZWsuQ1NTX0NMQVNTRVMuSVNfQUNUSVZFKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZURhdGVzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVEYXRlc1swXSBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLmRpc2FibGVEYXRlcy5tYXAoKGRhdGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZvcm1hdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuaXhUaW1lc3RhbXAgPj0gbmV3IERhdGUoZGF0ZVswXSkuZ2V0VGltZSgpICYmIHVuaXhUaW1lc3RhbXAgPD0gbmV3IERhdGUoZGF0ZVsxXSArICcgMjM6NTk6NTknKS5nZXRUaW1lKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXkuY2xhc3NMaXN0LmFkZChIZWxsb1dlZWsuQ1NTX0NMQVNTRVMuSVNfRElTQUJMRUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVuaXhUaW1lc3RhbXAgPj0gZGF0ZVswXSAmJiB1bml4VGltZXN0YW1wIDw9IGRhdGVbMV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXkuY2xhc3NMaXN0LmFkZChIZWxsb1dlZWsuQ1NTX0NMQVNTRVMuSVNfRElTQUJMRUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzYWJsZURhdGVzLmluY2x1ZGVzKHRoaXMuZm9ybWF0RGF0ZSh1bml4VGltZXN0YW1wLCB0aGlzLm9wdGlvbnMuZm9ybWF0KSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0RheS5jbGFzc0xpc3QuYWRkKEhlbGxvV2Vlay5DU1NfQ0xBU1NFUy5JU19ESVNBQkxFRCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGlzYWJsZURhdGVzLm1hcCgoZGF0ZTogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKHVuaXhUaW1lc3RhbXApLmdldFRpbWUoKSwgJ1lZWVktTU0tREQnKSA9PT0gdGhpcy5mb3JtYXREYXRlKG5ldyBEYXRlKCtkYXRlKS5nZXRUaW1lKCksICdZWVlZLU1NLUREJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEYXkuY2xhc3NMaXN0LmFkZChIZWxsb1dlZWsuQ1NTX0NMQVNTRVMuSVNfRElTQUJMRUQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlRGF0ZXMuaW5jbHVkZXModW5peFRpbWVzdGFtcC50b1N0cmluZygpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3RGF5LmNsYXNzTGlzdC5hZGQoSGVsbG9XZWVrLkNTU19DTEFTU0VTLklTX0RJU0FCTEVEKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXcgRGF0ZSh0aGlzLmRhdGUpLnNldEhvdXJzKDAsMCwwLDApID09PSBuZXcgRGF0ZSh0aGlzLmN1cnJlbnREYXkpLnNldEhvdXJzKDAsMCwwLDApICYmIHRoaXMub3B0aW9ucy50b2RheUhpZ2hsaWdodCkge1xuICAgICAgICAgICAgbmV3RGF5LmNsYXNzTGlzdC5hZGQoSGVsbG9XZWVrLkNTU19DTEFTU0VTLklTX1RPREFZKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZm9ybWF0KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRGF5cy5maW5kKCAoZGF5OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZGF5ID09PSB0aGlzLmZvcm1hdERhdGUodW5peFRpbWVzdGFtcCwgdGhpcy5vcHRpb25zLmZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3RGF5LmNsYXNzTGlzdC50b2dnbGUoSGVsbG9XZWVrLkNTU19DTEFTU0VTLklTX1NFTEVDVEVEKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXlzLmZpbmQoIChkYXk6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkYXkgPT09IHRpbWVzdGFtcC50b1N0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ld0RheS5jbGFzc0xpc3QudG9nZ2xlKEhlbGxvV2Vlay5DU1NfQ0xBU1NFUy5JU19TRUxFQ1RFRCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5tb250aCkge1xuICAgICAgICAgICAgdGhpcy5tb250aC5hcHBlbmRDaGlsZChuZXdEYXkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG1vbnRoc0FzU3RyaW5nKG1vbnRoSW5kZXg6IGFueSk6IGFueSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMubW9udGhTaG9ydCA/IHRoaXMubGFuZ3MubW9udGhzU2hvcnRbbW9udGhJbmRleF0gOiB0aGlzLmxhbmdzLm1vbnRoc1ttb250aEluZGV4XTtcbiAgICB9XG5cbiAgICBwdWJsaWMgd2Vla0FzU3RyaW5nKHdlZWtJbmRleDogYW55KTogYW55IHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy53ZWVrU2hvcnQgPyB0aGlzLmxhbmdzLmRheXNTaG9ydFt3ZWVrSW5kZXhdIDogdGhpcy5sYW5ncy5kYXlzW3dlZWtJbmRleF07XG4gICAgfVxuXG4gICAgcHVibGljIHVwZHRlZCgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgbGlzdERheXM6IG51bWJlcltdID0gW107XG4gICAgICAgIHRoaXMubGFiZWwudGV4dENvbnRlbnQgPSB0aGlzLm1vbnRoc0FzU3RyaW5nKHRoaXMuZGF0ZS5nZXRNb250aCgpKSArICcgJyArIHRoaXMuZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgICAgICAvKiogRGVmaW5lIHdlZWsgZm9ybWF0ICovXG4gICAgICAgIHRoaXMud2Vlay50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5vcHRpb25zLndlZWtTdGFydDsgaSA8IHRoaXMubGFuZ3MuZGF5c1Nob3J0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsaXN0RGF5cy5wdXNoKGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9wdGlvbnMud2Vla1N0YXJ0OyBpKyspIHtcbiAgICAgICAgICAgIGxpc3REYXlzLnB1c2goaSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGNvbnN0IGRheSBvZiBsaXN0RGF5cykge1xuICAgICAgICAgICAgdGhpcy5jcmVhdFdlZWsodGhpcy53ZWVrQXNTdHJpbmcoZGF5KSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNyZWF0ZU1vbnRoKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNsZWFyQ2FsZW5kYXIoKTogdm9pZCB7XG4gICAgICAgIHRoaXMubW9udGgudGV4dENvbnRlbnQgPSAnJztcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlQWN0aXZlQ2xhc3MoKTogdm9pZCB7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBPYmplY3Qua2V5cyh0aGlzLmFjdGl2ZURhdGVzKSkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVEYXRlc1tpXS5jbGFzc0xpc3QucmVtb3ZlKEhlbGxvV2Vlay5DU1NfQ0xBU1NFUy5JU19TRUxFQ1RFRCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBY3RpdmVDbGFzcygpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZWFkRmlsZShmaWxlOiBzdHJpbmcsIGNhbGxiYWNrOiBDYWxsYmFja0Z1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgICBjb25zdCB4b2JqID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICB4b2JqLm92ZXJyaWRlTWltZVR5cGUoJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgICAgIHhvYmoub3BlbignR0VUJywgZmlsZSwgdHJ1ZSk7XG4gICAgICAgICB4b2JqLm9ucmVhZHlzdGF0ZWNoYW5nZSA9ICgpID0+IHtcbiAgICAgICAgICAgICBpZiAoeG9iai5yZWFkeVN0YXRlID09PSA0ICYmIDxhbnk+eG9iai5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICBjYWxsYmFjayh4b2JqLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgfVxuICAgICAgICAgfTtcbiAgICAgICAgIHhvYmouc2VuZChudWxsKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZm9ybWF0RGF0ZSh0aW1lc3RhbXA6IG51bWJlciwgZm9ybWF0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICAgY29uc3QgZHQgPSBuZXcgRGF0ZSh0aW1lc3RhbXApO1xuICAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoJ2RkJywgZHQuZ2V0RGF0ZSgpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoJ0REJywgKGR0LmdldERhdGUoKSA+IDkgPyBkdC5nZXREYXRlKCkgOiAnMCcgKyBkdC5nZXREYXRlKCkpLnRvU3RyaW5nKCkpO1xuICAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoJ21tJywgKGR0LmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpKTtcbiAgICAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKCdNTU0nLCB0aGlzLmxhbmdzLm1vbnRoc1tkdC5nZXRNb250aCgpXSk7XG4gICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgnTU0nLCAoKGR0LmdldE1vbnRoKCkgKyAxKSA+IDkgPyAoZHQuZ2V0TW9udGgoKSArIDEpIDogJzAnICsgKGR0LmdldE1vbnRoKCkgKyAxKSkudG9TdHJpbmcoKSk7XG4gICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgnbW1tJywgdGhpcy5sYW5ncy5tb250aHNTaG9ydFtkdC5nZXRNb250aCgpXSk7XG4gICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgneXl5eScsIGR0LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG4gICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgnWVlZWScsIGR0LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSk7XG4gICAgICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgnWVknLCAoZHQuZ2V0RnVsbFllYXIoKS50b1N0cmluZygpKS5zdWJzdHJpbmcoMikpO1xuICAgICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoJ3l5JywgKGR0LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKSkuc3Vic3RyaW5nKDIpKTtcbiAgICAgICAgIHJldHVybiBmb3JtYXQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZXh0ZW5kKG9wdGlvbnM6IENhbGxiYWNrRnVuY3Rpb24pOiBvYmplY3Qge1xuICAgICAgICBjb25zdCBzZXR0aW5nczogYW55ID0ge1xuICAgICAgICAgICAgc2VsZWN0b3I6ICcuaGVsbG8td2VlaycsXG4gICAgICAgICAgICBsYW5nOiAnZW4nLFxuICAgICAgICAgICAgbGFuZ0ZvbGRlcjogJy4vZGlzdC9sYW5ncy8nLFxuICAgICAgICAgICAgZm9ybWF0OiBmYWxzZSxcbiAgICAgICAgICAgIHdlZWtTaG9ydDogdHJ1ZSxcbiAgICAgICAgICAgIG1vbnRoU2hvcnQ6IGZhbHNlLFxuICAgICAgICAgICAgbXVsdGlwbGVQaWNrOiBmYWxzZSxcbiAgICAgICAgICAgIGRlZmF1bHREYXRlOiBmYWxzZSxcbiAgICAgICAgICAgIHRvZGF5SGlnaGxpZ2h0OiB0cnVlLFxuICAgICAgICAgICAgZGlzYWJsZVBhc3REYXlzOiBmYWxzZSxcbiAgICAgICAgICAgIGRpc2FibGVkRGF5c09mV2VlazogZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlRGF0ZXM6IGZhbHNlLFxuICAgICAgICAgICAgd2Vla1N0YXJ0OiAwLFxuICAgICAgICAgICAgbWluRGF0ZTogZmFsc2UsXG4gICAgICAgICAgICBtYXhEYXRlOiBmYWxzZSxcbiAgICAgICAgICAgIG9uTG9hZDogKCkgPT4geyAvKiogY2FsbGJhY2sgZnVuY3Rpb24gKi8gfSxcbiAgICAgICAgICAgIG9uQ2hhbmdlOiAoKSA9PiB7IC8qKiBjYWxsYmFjayBmdW5jdGlvbiAqLyB9LFxuICAgICAgICAgICAgb25TZWxlY3Q6ICgpID0+IHsgLyoqIGNhbGxiYWNrIGZ1bmN0aW9uICovIH0sXG4gICAgICAgICAgICBvbkNsZWFyOiAoKSA9PiB7IC8qKiBjYWxsYmFjayBmdW5jdGlvbiAqLyB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGRlZmF1bHRTZXR0aW5ncyA9IDxhbnk+b3B0aW9ucztcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIE9iamVjdC5rZXlzKGRlZmF1bHRTZXR0aW5ncykpIHtcbiAgICAgICAgICAgIHNldHRpbmdzW2ldID0gZGVmYXVsdFNldHRpbmdzW2ldO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgIH1cbn1cblxuaW1wb3J0IHsgSGVsbG9XZWVrIGFzIE15SGVsbG9XZWVrIH0gZnJvbSAnLi9oZWxsby13ZWVrJztcbmV4cG9ydCBuYW1lc3BhY2UgTXlNb2R1bGUge1xuICAgIGV4cG9ydCBjb25zdCBIZWxsb1dlZWsgPSBNeUhlbGxvV2Vlaztcbn1cblxuKDxhbnk+d2luZG93KS5IZWxsb1dlZWsgPSBNeU1vZHVsZS5IZWxsb1dlZWs7XG4iXSwic291cmNlUm9vdCI6IiJ9